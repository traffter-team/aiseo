{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 66, "column": 0}, "map": {"version":3,"sources":["file:///Users/vkyrychenko/Desktop/aiseo/src/lib/claude-api.ts"],"sourcesContent":["// Available Claude models with their capabilities\nexport enum ClaudeModel {\n  SONNET_3_5 = 'claude-3-5-sonnet-20241022',\n  SONNET_3 = 'claude-3-sonnet-20240229',\n  HAIKU_3_5 = 'claude-3-5-haiku-20241022',\n  OPUS_3 = 'claude-3-opus-20240229'\n}\n\n// Model configurations for different use cases\nexport const MODEL_CONFIGS = {\n  [ClaudeModel.SONNET_3_5]: {\n    name: 'Claude 3.5 Sonnet',\n    description: 'Best for complex reasoning, coding, and analysis',\n    maxTokens: 4096,\n    recommended: ['new-project', 'html-structure', 'seo', 'tester-validator-reviewer']\n  },\n  [ClaudeModel.SONNET_3]: {\n    name: 'Claude 3 Sonnet',\n    description: 'Good balance of performance and cost',\n    maxTokens: 4096,\n    recommended: ['ui', 'composer', 'content']\n  },\n  [ClaudeModel.HAIKU_3_5]: {\n    name: 'Claude 3.5 Haiku',\n    description: 'Fastest and most cost-effective',\n    maxTokens: 4096,\n    recommended: ['researcher', 'unicalizator', 'decomposer']\n  },\n  [ClaudeModel.OPUS_3]: {\n    name: 'Claude 3 Opus',\n    description: 'Most capable for complex tasks',\n    maxTokens: 4096,\n    recommended: ['composer', 'tester-validator-reviewer']\n  }\n};\n\ninterface ClaudeMessage {\n  role: 'user' | 'assistant';\n  content: string;\n}\n\ninterface ClaudeRequest {\n  model: string;\n  max_tokens: number;\n  messages: ClaudeMessage[];\n}\n\ninterface ClaudeResponse {\n  content: Array<{\n    type: 'text';\n    text: string;\n  }>;\n  usage: {\n    input_tokens: number;\n    output_tokens: number;\n  };\n}\n\nexport interface ClaudeAPIOptions {\n  model?: ClaudeModel;\n  maxTokens?: number;\n  temperature?: number;\n}\n\nexport async function callClaudeAPI(\n  prompt: string, \n  options: ClaudeAPIOptions = {}\n): Promise<string> {\n  const apiKey = process.env.CLAUDE_API_KEY;\n  \n  if (!apiKey) {\n    throw new Error('CLAUDE_API_KEY environment variable is not set');\n  }\n\n  const {\n    model = ClaudeModel.SONNET_3_5,\n    maxTokens = 4096\n  } = options;\n\n  const requestBody: ClaudeRequest = {\n    model,\n    max_tokens: maxTokens,\n    messages: [\n      {\n        role: 'user',\n        content: prompt\n      }\n    ]\n  };\n\n  // Retry logic for overloaded API\n  const maxRetries = 3;\n  const baseDelay = 2000; // 2 seconds\n  \n  for (let attempt = 1; attempt <= maxRetries; attempt++) {\n    try {\n      console.log(`[Claude API] Attempt ${attempt}/${maxRetries}`);\n      \n      const response = await fetch('https://api.anthropic.com/v1/messages', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'x-api-key': apiKey,\n          'anthropic-version': '2023-06-01'\n        },\n        body: JSON.stringify(requestBody)\n      });\n\n      if (!response.ok) {\n        const errorText = await response.text();\n        \n        // If overloaded (529) or rate limited (429), retry with exponential backoff\n        if (response.status === 529 || response.status === 429) {\n          if (attempt < maxRetries) {\n            const delay = baseDelay * Math.pow(2, attempt - 1);\n            console.log(`[Claude API] Overloaded/Rate limited, retrying in ${delay}ms...`);\n            await new Promise(resolve => setTimeout(resolve, delay));\n            continue;\n          }\n        }\n        \n        throw new Error(`Claude API error: ${response.status} - ${errorText}`);\n      }\n      \n      // Success - process response\n      const data: ClaudeResponse = await response.json();\n      \n      // Extract the text content from the response\n      const textContent = data.content.find(content => content.type === 'text');\n      \n      if (!textContent) {\n        throw new Error('No text content found in Claude API response');\n      }\n\n      return textContent.text;\n      \n    } catch (error) {\n      console.error(`[Claude API] Attempt ${attempt} failed:`, error);\n      \n      // If this is the last attempt, throw the error\n      if (attempt === maxRetries) {\n        throw error;\n      }\n      \n      // Otherwise, continue to next attempt\n    }\n  }\n  \n  // This should never be reached due to the throw in the catch block\n  throw new Error('All Claude API retry attempts failed');\n}\n\n// Utility function to test the API connection\nexport async function testClaudeConnection(): Promise<boolean> {\n  try {\n    const response = await callClaudeAPI('Hello, this is a test message.');\n    return response.length > 0;\n  } catch (error) {\n    console.error('Claude API connection test failed:', error);\n    return false;\n  }\n} "],"names":[],"mappings":"AAAA,kDAAkD;;;;;;;AAC3C,IAAA,AAAK,qCAAA;;;;;WAAA;;AAQL,MAAM,gBAAgB;IAC3B,8BAAwB,EAAE;QACxB,MAAM;QACN,aAAa;QACb,WAAW;QACX,aAAa;YAAC;YAAe;YAAkB;YAAO;SAA4B;IACpF;IACA,4BAAsB,EAAE;QACtB,MAAM;QACN,aAAa;QACb,WAAW;QACX,aAAa;YAAC;YAAM;YAAY;SAAU;IAC5C;IACA,6BAAuB,EAAE;QACvB,MAAM;QACN,aAAa;QACb,WAAW;QACX,aAAa;YAAC;YAAc;YAAgB;SAAa;IAC3D;IACA,0BAAoB,EAAE;QACpB,MAAM;QACN,aAAa;QACb,WAAW;QACX,aAAa;YAAC;YAAY;SAA4B;IACxD;AACF;AA8BO,eAAe,cACpB,MAAc,EACd,UAA4B,CAAC,CAAC;IAE9B,MAAM,SAAS,QAAQ,GAAG,CAAC,cAAc;IAEzC,IAAI,CAAC,QAAQ;QACX,MAAM,IAAI,MAAM;IAClB;IAEA,MAAM,EACJ,oCAA8B,EAC9B,YAAY,IAAI,EACjB,GAAG;IAEJ,MAAM,cAA6B;QACjC;QACA,YAAY;QACZ,UAAU;YACR;gBACE,MAAM;gBACN,SAAS;YACX;SACD;IACH;IAEA,iCAAiC;IACjC,MAAM,aAAa;IACnB,MAAM,YAAY,MAAM,YAAY;IAEpC,IAAK,IAAI,UAAU,GAAG,WAAW,YAAY,UAAW;QACtD,IAAI;YACF,QAAQ,GAAG,CAAC,CAAC,qBAAqB,EAAE,QAAQ,CAAC,EAAE,YAAY;YAE3D,MAAM,WAAW,MAAM,MAAM,yCAAyC;gBACpE,QAAQ;gBACR,SAAS;oBACP,gBAAgB;oBAChB,aAAa;oBACb,qBAAqB;gBACvB;gBACA,MAAM,KAAK,SAAS,CAAC;YACvB;YAEA,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,MAAM,YAAY,MAAM,SAAS,IAAI;gBAErC,4EAA4E;gBAC5E,IAAI,SAAS,MAAM,KAAK,OAAO,SAAS,MAAM,KAAK,KAAK;oBACtD,IAAI,UAAU,YAAY;wBACxB,MAAM,QAAQ,YAAY,KAAK,GAAG,CAAC,GAAG,UAAU;wBAChD,QAAQ,GAAG,CAAC,CAAC,kDAAkD,EAAE,MAAM,KAAK,CAAC;wBAC7E,MAAM,IAAI,QAAQ,CAAA,UAAW,WAAW,SAAS;wBACjD;oBACF;gBACF;gBAEA,MAAM,IAAI,MAAM,CAAC,kBAAkB,EAAE,SAAS,MAAM,CAAC,GAAG,EAAE,WAAW;YACvE;YAEA,6BAA6B;YAC7B,MAAM,OAAuB,MAAM,SAAS,IAAI;YAEhD,6CAA6C;YAC7C,MAAM,cAAc,KAAK,OAAO,CAAC,IAAI,CAAC,CAAA,UAAW,QAAQ,IAAI,KAAK;YAElE,IAAI,CAAC,aAAa;gBAChB,MAAM,IAAI,MAAM;YAClB;YAEA,OAAO,YAAY,IAAI;QAEzB,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,CAAC,qBAAqB,EAAE,QAAQ,QAAQ,CAAC,EAAE;YAEzD,+CAA+C;YAC/C,IAAI,YAAY,YAAY;gBAC1B,MAAM;YACR;QAEA,sCAAsC;QACxC;IACF;IAEA,mEAAmE;IACnE,MAAM,IAAI,MAAM;AAClB;AAGO,eAAe;IACpB,IAAI;QACF,MAAM,WAAW,MAAM,cAAc;QACrC,OAAO,SAAS,MAAM,GAAG;IAC3B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,sCAAsC;QACpD,OAAO;IACT;AACF","debugId":null}},
    {"offset": {"line": 199, "column": 0}, "map": {"version":3,"sources":["file:///Users/vkyrychenko/Desktop/aiseo/src/services/system-prompts.ts"],"sourcesContent":["// AISEO System Prompts\n// This file contains all system prompts for different AI agents\n\n// ===== CORE PROJECT AGENTS =====\n\nexport const NEW_PROJECT_AGENT_PROMPT = `You are an expert web application architect.\nBased on the following project information, design the ideal file and folder structure for a modern web project as a FLAT LIST.\n\nProject name: {project_name}\nUser requirement for structure: {structure}\nSite type: {site_type}\n\nInstructions:\n\nUse best practices for file/folder naming (e.g., React/Next.js conventions).\n\nThe root folder for the project should be named similar to the project name but in kebab-case. All files and folders must be inside this parent folder.\n\nEach file or folder must be a separate object in a single, flat JSON array.\n\nEach object must have:\n\npath: string, the full relative path (e.g., casino-poi/src/pages/index.tsx)\n\ntype: string, (page, component, asset, folder, etc.)\n\ndescription: (optional, one-sentence purpose)\n\nDo NOT use children, nested objects, or arrays inside any object.\n\nOutput only a single, flat JSON array containing all files and folders. Do not include any extra text, markdown, or explanations.\n\nExample Output:\n\njson\nCopy\nEdit\n[\n  { \"path\": \"casino-poi/src/pages/index.tsx\", \"type\": \"page\", \"description\": \"Home page\" },\n  { \"path\": \"casino-poi/src/pages/about.tsx\", \"type\": \"page\", \"description\": \"About page\" },\n  { \"path\": \"casino-poi/src/components/Navbar.tsx\", \"type\": \"component\", \"description\": \"Site navigation\" },\n  { \"path\": \"casino-poi/public/images/logos/\", \"type\": \"folder\", \"description\": \"Logo assets\" }\n]\n`;\n\n\nexport const UI_AGENT_PROMPT = `\n// UI Agent System Prompt\n// This agent handles UI design and user interface creation\n// TODO: Add specific prompt content\n`;\n\nexport const HTML_STRUCTURE_AGENT_PROMPT = `\n// HTML/Structure Site/Page Agent System Prompt\n// This agent creates HTML structure and page layouts\n// TODO: Add specific prompt content\n`;\n\nexport const COMPOSER_AGENT_PROMPT = `\n// Composer Agent System Prompt\n// This agent composes and assembles content and components\n// TODO: Add specific prompt content\n`;\n\n// ===== VALIDATION & TESTING AGENTS =====\n\nexport const TESTER_VALIDATOR_REVIEWER_PROMPT = `\n// Tester/Validator/Reviewer Agent System Prompt\n// This agent tests, validates, and reviews generated content and code\n// TODO: Add specific prompt content\n`;\n\n// ===== CONTENT & SEO AGENTS =====\n\nexport const SEO_AGENT_PROMPT = `\n// SEO Agent System Prompt\n// This agent handles SEO optimization and analysis\n// TODO: Add specific prompt content\n`;\n\nexport const CONTENT_AGENT_PROMPT = `\n// Content Agent System Prompt\n// This agent generates and manages content\n// TODO: Add specific prompt content\n`;\n\nexport const RESEARCHER_AGENT_PROMPT = `\nYour task is to look through the internet and find relevant information for {brand_name}, as a hint it's located in {target_country}. You can find info on this websites:\nhttps://casino.guru\nhttps://www.askgamblers.com/online-casinos\nhttps://www.casino.org/\nhttps://onnlinecasinogroups.com\n\nYou need to find this information:\n- Bonus info (All Available Bonuses, structured)\n- Logo image (If possible find it)\n- Top slots in that online casino\n- Provider List. Show all available providers\n\nOutput must be clear, very structured, without any extra text. Use only FLAT LIST structure.\n[\n{\"Bonuses\": [\"Bonus1\", \"Bonus2\"]},\n{\"Providers\": [\"Provider1\", \"Provider2\"]},\n{\"Top Slots\": [\"Slot1\", \"Slot2\"]},\n{\"Logo\": \"Logo URL or description\"}\n]\n\nBrand Name: {brand_name}\nTarget Country: {target_country}\nTarget Language: {target_language}\n`;\n\n// ===== SPECIALIZED AGENTS =====\n\nexport const UNICALIZATOR_AGENT_PROMPT = `\n// Unicalizator Agent System Prompt\n// This agent ensures content uniqueness and originality\n// TODO: Add specific prompt content\n`;\n\nexport const DECOMPOSER_AGENT_PROMPT = `\n// Decomposer Agent System Prompt\n// This agent breaks down complex tasks into smaller components\n// TODO: Add specific prompt content\n`;\n\n// ===== ORCHESTRATOR AGENT =====\n\nexport const ORCHESTRATOR_AGENT_PROMPT = `\n// Orchestrator Agent System Prompt\n// This agent supervises and controls the entire workflow\n// TODO: Add specific prompt content\n`;\n\nexport const SUMMARIZER_PROMPT = `\nYou are a project summarizer for the AISEO platform.\nYour task is to analyze project data and provide a concise summary of the current project status.\n\nBased on the project information provided, analyze:\n- Current stage/phase of the project\n- Progress percentage\n- What has been completed\n- What is currently in progress\n- Any issues or blockers\n- Next steps\n\nProvide a brief, clear summary that can be used as context for other agents.\nKeep the summary under 200 words and focus on actionable information.\n\nProject Data: {project_data}\nAgent Tasks: {agent_tasks}\nProject Files: {project_files}\n\nOutput should be a clear, concise summary of the project's current state.\n`;\n\nexport const FILE_REPORT_PROMPT = `\nYou are a file report generator for the AISEO platform.\nYour task is to organize and present the current file structure in a clear, actionable format.\n\nBased on the project files provided, create a structured report showing:\n- Total number of files\n- Files organized by type (pages, components, assets, etc.)\n- File tree structure\n- Files relevant to specific agents\n\nFormat the output as a clear, organized list that agents can understand and use.\nFocus on providing practical information about what files are available to work with.\n\nProject Files: {project_files}\nTarget Agent: {target_agent}\n\nOutput should be a well-organized file report that agents can use to understand the project structure.\n`;\n\n// ===== UTILITY FUNCTIONS =====\n\nexport const getAgentPrompt = (agentType: string): string => {\n  const prompts: Record<string, string> = {\n    'new-project': NEW_PROJECT_AGENT_PROMPT,\n    'ui': UI_AGENT_PROMPT,\n    'html-structure': HTML_STRUCTURE_AGENT_PROMPT,\n    'composer': COMPOSER_AGENT_PROMPT,\n    'tester-validator-reviewer': TESTER_VALIDATOR_REVIEWER_PROMPT,\n    'seo': SEO_AGENT_PROMPT,\n    'content': CONTENT_AGENT_PROMPT,\n    'researcher': RESEARCHER_AGENT_PROMPT,\n    'unicalizator': UNICALIZATOR_AGENT_PROMPT,\n    'decomposer': DECOMPOSER_AGENT_PROMPT,\n    'orchestrator': ORCHESTRATOR_AGENT_PROMPT,\n    'summarizer': SUMMARIZER_PROMPT,\n    'file-report': FILE_REPORT_PROMPT,\n  };\n\n  return prompts[agentType] || 'Agent prompt not found';\n};\n\nexport const getAgentDescription = (agentType: string): string => {\n  const descriptions: Record<string, string> = {\n    'new-project': 'Handles initial project setup and configuration',\n    'ui': 'Handles UI design and user interface creation',\n    'html-structure': 'Creates HTML structure and page layouts',\n    'composer': 'Composes and assembles content and components',\n    'tester-validator-reviewer': 'Tests, validates, and reviews generated content and code',\n    'seo': 'Handles SEO optimization and analysis',\n    'content': 'Generates and manages content',\n    'researcher': 'Conducts research and gathers information',\n    'unicalizator': 'Ensures content uniqueness and originality',\n    'decomposer': 'Breaks down complex tasks into smaller components',\n    'orchestrator': 'Supervises and controls the entire workflow',\n    'summarizer': 'Analyzes and summarizes project status',\n    'file-report': 'Generates file structure reports for agents',\n  };\n\n  return descriptions[agentType] || 'Agent description not found';\n};\n\nexport const getAllAgentTypes = (): string[] => {\n  return [\n    'new-project',\n    'ui',\n    'html-structure', \n    'composer',\n    'tester-validator-reviewer',\n    'seo',\n    'content',\n    'researcher',\n    'unicalizator',\n    'decomposer',\n    'orchestrator',\n    'summarizer',\n    'file-report'\n  ];\n}; "],"names":[],"mappings":"AAAA,uBAAuB;AACvB,gEAAgE;AAEhE,kCAAkC;;;;;;;;;;;;;;;;;;;AAE3B,MAAM,2BAA2B,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCzC,CAAC;AAGM,MAAM,kBAAkB,CAAC;;;;AAIhC,CAAC;AAEM,MAAM,8BAA8B,CAAC;;;;AAI5C,CAAC;AAEM,MAAM,wBAAwB,CAAC;;;;AAItC,CAAC;AAIM,MAAM,mCAAmC,CAAC;;;;AAIjD,CAAC;AAIM,MAAM,mBAAmB,CAAC;;;;AAIjC,CAAC;AAEM,MAAM,uBAAuB,CAAC;;;;AAIrC,CAAC;AAEM,MAAM,0BAA0B,CAAC;;;;;;;;;;;;;;;;;;;;;;;;AAwBxC,CAAC;AAIM,MAAM,4BAA4B,CAAC;;;;AAI1C,CAAC;AAEM,MAAM,0BAA0B,CAAC;;;;AAIxC,CAAC;AAIM,MAAM,4BAA4B,CAAC;;;;AAI1C,CAAC;AAEM,MAAM,oBAAoB,CAAC;;;;;;;;;;;;;;;;;;;;AAoBlC,CAAC;AAEM,MAAM,qBAAqB,CAAC;;;;;;;;;;;;;;;;;AAiBnC,CAAC;AAIM,MAAM,iBAAiB,CAAC;IAC7B,MAAM,UAAkC;QACtC,eAAe;QACf,MAAM;QACN,kBAAkB;QAClB,YAAY;QACZ,6BAA6B;QAC7B,OAAO;QACP,WAAW;QACX,cAAc;QACd,gBAAgB;QAChB,cAAc;QACd,gBAAgB;QAChB,cAAc;QACd,eAAe;IACjB;IAEA,OAAO,OAAO,CAAC,UAAU,IAAI;AAC/B;AAEO,MAAM,sBAAsB,CAAC;IAClC,MAAM,eAAuC;QAC3C,eAAe;QACf,MAAM;QACN,kBAAkB;QAClB,YAAY;QACZ,6BAA6B;QAC7B,OAAO;QACP,WAAW;QACX,cAAc;QACd,gBAAgB;QAChB,cAAc;QACd,gBAAgB;QAChB,cAAc;QACd,eAAe;IACjB;IAEA,OAAO,YAAY,CAAC,UAAU,IAAI;AACpC;AAEO,MAAM,mBAAmB;IAC9B,OAAO;QACL;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;AACH","debugId":null}},
    {"offset": {"line": 425, "column": 0}, "map": {"version":3,"sources":["file:///Users/vkyrychenko/Desktop/aiseo/src/lib/agent-executor.ts"],"sourcesContent":["import { callClaudeAPI, ClaudeModel, ClaudeAPIOptions, MODEL_CONFIGS } from './claude-api';\nimport { getAgentPrompt, getAllAgentTypes } from '@/services/system-prompts';\n\n// Agent configuration interface\nexport interface AgentConfig {\n  name: string;\n  description: string;\n  model: ClaudeModel;\n  maxTokens: number;\n  temperature?: number;\n}\n\n// Default configurations for each agent type\nexport const AGENT_CONFIGS: Record<string, AgentConfig> = {\n  'new-project': {\n    name: 'New Project Agent',\n    description: 'Handles initial project setup and file structure generation',\n    model: ClaudeModel.SONNET_3_5,\n    maxTokens: 4096,\n    temperature: 0.3\n  },\n  'ui': {\n    name: 'UI Agent',\n    description: 'Handles UI design and user interface creation',\n    model: ClaudeModel.SONNET_3,\n    maxTokens: 3000,\n    temperature: 0.5\n  },\n  'html-structure': {\n    name: 'HTML Structure Agent',\n    description: 'Creates HTML structure and page layouts',\n    model: ClaudeModel.SONNET_3_5,\n    maxTokens: 4096,\n    temperature: 0.2\n  },\n  'composer': {\n    name: 'Composer Agent',\n    description: 'Composes and assembles content and components',\n    model: ClaudeModel.OPUS_3,\n    maxTokens: 4096,\n    temperature: 0.4\n  },\n  'tester-validator-reviewer': {\n    name: 'Tester/Validator/Reviewer Agent',\n    description: 'Tests, validates, and reviews generated content and code',\n    model: ClaudeModel.SONNET_3_5,\n    maxTokens: 4096,\n    temperature: 0.1\n  },\n  'seo': {\n    name: 'SEO Agent',\n    description: 'Handles SEO optimization and analysis',\n    model: ClaudeModel.SONNET_3_5,\n    maxTokens: 3000,\n    temperature: 0.3\n  },\n  'content': {\n    name: 'Content Agent',\n    description: 'Generates and manages content',\n    model: ClaudeModel.SONNET_3,\n    maxTokens: 4096,\n    temperature: 0.6\n  },\n  'researcher': {\n    name: 'Researcher Agent',\n    description: 'Conducts research and gathers information',\n    model: ClaudeModel.HAIKU_3_5,\n    maxTokens: 3000,\n    temperature: 0.4\n  },\n  'unicalizator': {\n    name: 'Unicalizator Agent',\n    description: 'Ensures content uniqueness and originality',\n    model: ClaudeModel.HAIKU_3_5,\n    maxTokens: 2000,\n    temperature: 0.2\n  },\n  'decomposer': {\n    name: 'Decomposer Agent',\n    description: 'Breaks down complex tasks into smaller components',\n    model: ClaudeModel.HAIKU_3_5,\n    maxTokens: 2000,\n    temperature: 0.3\n  },\n  'orchestrator': {\n    name: 'Orchestrator Agent',\n    description: 'Supervises and controls the entire workflow',\n    model: ClaudeModel.SONNET_3_5,\n    maxTokens: 4096,\n    temperature: 0.2\n  },\n  'summarizer': {\n    name: 'Summarizer Agent',\n    description: 'Analyzes and summarizes project status',\n    model: ClaudeModel.SONNET_3,\n    maxTokens: 2000,\n    temperature: 0.4\n  },\n  'file-report': {\n    name: 'File Report Agent',\n    description: 'Generates file structure reports for agents',\n    model: ClaudeModel.HAIKU_3_5,\n    maxTokens: 3000,\n    temperature: 0.1\n  }\n};\n\n// Generic agent execution interface\nexport interface AgentExecutionOptions {\n  agentType: string;\n  userInput: Record<string, any>;\n  customPrompt?: string;\n  modelOverride?: ClaudeModel;\n  maxTokensOverride?: number;\n  temperatureOverride?: number;\n}\n\nexport interface AgentExecutionResult {\n  success: boolean;\n  response?: string;\n  error?: string;\n  filledPrompt?: string;\n  metadata: {\n    agentType: string;\n    model: ClaudeModel;\n    maxTokens: number;\n    temperature?: number;\n    executionTime: number;\n    timestamp: string;\n  };\n}\n\n// Main agent executor function\nexport async function executeAgent(options: AgentExecutionOptions): Promise<AgentExecutionResult> {\n  const startTime = Date.now();\n  let filledPrompt = '';\n  \n  try {\n    const { agentType, userInput, customPrompt, modelOverride, maxTokensOverride, temperatureOverride } = options;\n    \n    // Validate agent type\n    if (!getAllAgentTypes().includes(agentType)) {\n      throw new Error(`Invalid agent type: ${agentType}`);\n    }\n    \n    // Get agent configuration\n    const agentConfig = AGENT_CONFIGS[agentType];\n    if (!agentConfig) {\n      throw new Error(`No configuration found for agent: ${agentType}`);\n    }\n    \n    // Get the system prompt\n    const systemPrompt = customPrompt || getAgentPrompt(agentType);\n    if (!systemPrompt || systemPrompt === 'Agent prompt not found') {\n      throw new Error(`No system prompt found for agent: ${agentType}`);\n    }\n    \n    // Fill the prompt with user input\n    filledPrompt = fillPromptWithUserInput(systemPrompt, userInput);\n    \n    // Prepare Claude API options\n    const claudeOptions: ClaudeAPIOptions = {\n      model: modelOverride || agentConfig.model,\n      maxTokens: maxTokensOverride || agentConfig.maxTokens,\n      temperature: temperatureOverride || agentConfig.temperature\n    };\n    \n    // Execute the agent\n    const response = await callClaudeAPI(filledPrompt, claudeOptions);\n    \n    const executionTime = Date.now() - startTime;\n    \n    return {\n      success: true,\n      response,\n      filledPrompt,\n      metadata: {\n        agentType,\n        model: claudeOptions.model || ClaudeModel.SONNET_3_5,\n        maxTokens: claudeOptions.maxTokens || 4096,\n        temperature: claudeOptions.temperature,\n        executionTime,\n        timestamp: new Date().toISOString()\n      }\n    };\n    \n  } catch (error) {\n    const executionTime = Date.now() - startTime;\n    \n    return {\n      success: false,\n      error: error instanceof Error ? error.message : 'Unknown error occurred',\n      filledPrompt,\n      metadata: {\n        agentType: options.agentType,\n        model: options.modelOverride || AGENT_CONFIGS[options.agentType]?.model || ClaudeModel.SONNET_3_5,\n        maxTokens: options.maxTokensOverride || AGENT_CONFIGS[options.agentType]?.maxTokens || 4096,\n        temperature: options.temperatureOverride || AGENT_CONFIGS[options.agentType]?.temperature,\n        executionTime,\n        timestamp: new Date().toISOString()\n      }\n    };\n  }\n}\n\n// Helper function to fill prompts with user input\nfunction fillPromptWithUserInput(prompt: string, userInput: Record<string, any>): string {\n  let filledPrompt = prompt;\n  \n  // Replace common patterns\n  const replacements: Record<string, string> = {\n    '{project_name}': userInput.brand_name || userInput.project_name || 'Unknown Project',\n    '{brand_name}': userInput.brand_name || 'Unknown Brand',\n    '{target_country}': userInput.target_country || 'Unknown Country',\n    '{target_language}': userInput.target_language || 'Unknown Language',\n    '{site_type}': userInput.site_type || 'Unknown Site Type',\n    '{industry}': userInput.industry || 'Casino/Gaming'\n  };\n  \n  // Handle structure data if present\n  if (userInput.structure) {\n    const { selectedPages, pageSections, totalPages } = userInput.structure;\n    const structureInfo = `\nSite Type: ${userInput.site_type || 'Unknown'}\nTotal Pages: ${totalPages || 0}\nSelected Pages: ${selectedPages?.join(', ') || 'None'}\nPage Sections:\n${selectedPages?.map((page: string) => {\n  const sections = pageSections?.[page] || [];\n  return `- ${page}: ${sections.join(', ')}`;\n}).join('\\n') || 'No sections defined'}\nTarget Country: ${userInput.target_country || 'Unknown'}\nTarget Language: ${userInput.target_language || 'Unknown'}\nIndustry: ${userInput.industry || 'Casino/Gaming'}`;\n    \n    replacements['{structure}'] = structureInfo;\n  }\n  \n  // Apply all replacements\n  Object.entries(replacements).forEach(([key, value]) => {\n    filledPrompt = filledPrompt.replace(new RegExp(key.replace(/[{}]/g, '\\\\$&'), 'g'), value);\n  });\n  \n  return filledPrompt;\n}\n\n// Helper function to get recommended model for an agent\nexport function getRecommendedModel(agentType: string): ClaudeModel {\n  const agentConfig = AGENT_CONFIGS[agentType];\n  return agentConfig?.model || ClaudeModel.SONNET_3_5;\n}\n\n// Helper function to get all available models\nexport function getAvailableModels(): Array<{model: ClaudeModel, config: typeof MODEL_CONFIGS[ClaudeModel]}> {\n  return Object.entries(MODEL_CONFIGS).map(([model, config]) => ({\n    model: model as ClaudeModel,\n    config\n  }));\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 637, "column": 0}, "map": {"version":3,"sources":["file:///Users/vkyrychenko/Desktop/aiseo/src/app/api/claude/agent/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\nimport { executeAgent, AGENT_CONFIGS, getAvailableModels } from '@/lib/agent-executor';\nimport { ClaudeModel } from '@/lib/claude-api';\nimport { getAllAgentTypes } from '@/services/system-prompts';\n\n// Main agent execution endpoint\nexport async function POST(request: NextRequest) {\n  try {\n    const body = await request.json();\n    const { \n      agentType, \n      userInput, \n      customPrompt,\n      modelOverride,\n      maxTokensOverride,\n      temperatureOverride \n    } = body;\n\n    // Validate required fields\n    if (!agentType) {\n      return NextResponse.json(\n        { error: 'agentType is required' },\n        { status: 400 }\n      );\n    }\n\n    if (!userInput) {\n      return NextResponse.json(\n        { error: 'userInput is required' },\n        { status: 400 }\n      );\n    }\n\n    // Validate agent type\n    if (!getAllAgentTypes().includes(agentType)) {\n      return NextResponse.json(\n        { error: `Invalid agent type: ${agentType}. Valid types: ${getAllAgentTypes().join(', ')}` },\n        { status: 400 }\n      );\n    }\n\n    // Special validation for new-project agent\n    if (agentType === 'new-project') {\n      if (!userInput.brand_name || !userInput.target_country || !userInput.target_language || !userInput.site_type) {\n        return NextResponse.json(\n          { error: 'Missing required fields for new-project: brand_name, target_country, target_language, site_type' },\n          { status: 400 }\n        );\n      }\n    }\n\n    // Execute the agent\n    const result = await executeAgent({\n      agentType,\n      userInput,\n      customPrompt,\n      modelOverride,\n      maxTokensOverride,\n      temperatureOverride\n    });\n\n    return NextResponse.json(result);\n    \n  } catch (error) {\n    console.error('Error in agent execution:', error);\n    \n    return NextResponse.json(\n      {\n        success: false,\n        error: error instanceof Error ? error.message : 'Unknown error occurred'\n      },\n      { status: 500 }\n    );\n  }\n}\n\n// Get available agents and models\nexport async function GET() {\n  try {\n    const agentTypes = getAllAgentTypes();\n    const agentConfigs = AGENT_CONFIGS;\n    const availableModels = getAvailableModels();\n\n    return NextResponse.json({\n      success: true,\n      data: {\n        agentTypes,\n        agentConfigs,\n        availableModels\n      },\n      timestamp: new Date().toISOString()\n    });\n    \n  } catch (error) {\n    console.error('Error getting agent information:', error);\n    \n    return NextResponse.json(\n      {\n        success: false,\n        error: error instanceof Error ? error.message : 'Unknown error occurred'\n      },\n      { status: 500 }\n    );\n  }\n}"],"names":[],"mappings":";;;;AAAA;AACA;AAEA;;;;AAGO,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,EACJ,SAAS,EACT,SAAS,EACT,YAAY,EACZ,aAAa,EACb,iBAAiB,EACjB,mBAAmB,EACpB,GAAG;QAEJ,2BAA2B;QAC3B,IAAI,CAAC,WAAW;YACd,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAwB,GACjC;gBAAE,QAAQ;YAAI;QAElB;QAEA,IAAI,CAAC,WAAW;YACd,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAwB,GACjC;gBAAE,QAAQ;YAAI;QAElB;QAEA,sBAAsB;QACtB,IAAI,CAAC,CAAA,GAAA,sIAAA,CAAA,mBAAgB,AAAD,IAAI,QAAQ,CAAC,YAAY;YAC3C,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CACtB;gBAAE,OAAO,CAAC,oBAAoB,EAAE,UAAU,eAAe,EAAE,CAAA,GAAA,sIAAA,CAAA,mBAAgB,AAAD,IAAI,IAAI,CAAC,OAAO;YAAC,GAC3F;gBAAE,QAAQ;YAAI;QAElB;QAEA,2CAA2C;QAC3C,IAAI,cAAc,eAAe;YAC/B,IAAI,CAAC,UAAU,UAAU,IAAI,CAAC,UAAU,cAAc,IAAI,CAAC,UAAU,eAAe,IAAI,CAAC,UAAU,SAAS,EAAE;gBAC5G,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CACtB;oBAAE,OAAO;gBAAkG,GAC3G;oBAAE,QAAQ;gBAAI;YAElB;QACF;QAEA,oBAAoB;QACpB,MAAM,SAAS,MAAM,CAAA,GAAA,iIAAA,CAAA,eAAY,AAAD,EAAE;YAChC;YACA;YACA;YACA;YACA;YACA;QACF;QAEA,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;IAE3B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,6BAA6B;QAE3C,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CACtB;YACE,SAAS;YACT,OAAO,iBAAiB,QAAQ,MAAM,OAAO,GAAG;QAClD,GACA;YAAE,QAAQ;QAAI;IAElB;AACF;AAGO,eAAe;IACpB,IAAI;QACF,MAAM,aAAa,CAAA,GAAA,sIAAA,CAAA,mBAAgB,AAAD;QAClC,MAAM,eAAe,iIAAA,CAAA,gBAAa;QAClC,MAAM,kBAAkB,CAAA,GAAA,iIAAA,CAAA,qBAAkB,AAAD;QAEzC,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,MAAM;gBACJ;gBACA;gBACA;YACF;YACA,WAAW,IAAI,OAAO,WAAW;QACnC;IAEF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,oCAAoC;QAElD,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CACtB;YACE,SAAS;YACT,OAAO,iBAAiB,QAAQ,MAAM,OAAO,GAAG;QAClD,GACA;YAAE,QAAQ;QAAI;IAElB;AACF","debugId":null}}]
}